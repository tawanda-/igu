(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{374:function(e,t,n){e.exports=n(835)},545:function(e,t,n){},547:function(e,t,n){},690:function(e,t,n){},835:function(e,t,n){"use strict";n.r(t);n(375);var a=n(0),o=n.n(a),l=n(11),i=n.n(l),r=(n(545),n(158)),c=n(159),s=n(163),u=n(160),d=n(162),m=(n(547),n(837)),h=n(239),g=n(238),f=n(119),p=n(118),w=n.n(p),E=n(8),C=n(38),y=n(234),S=n.n(y),b=n(370),v=n.n(b),j=n(236),_=n.n(j),k=n(369),R=n.n(k),O=n(235),x=n.n(O),I=n(64),D=n.n(I),A=n(39),M=n.n(A),N=n(63),U=n.n(N),P=n(161),T=n.n(P),B=n(120),q=n.n(B),H=n(33),J=n.n(H),z=n(366),Q=n.n(z),V=n(365),W=n.n(V),F=n(367),G=n.n(F),L=n(368),Y=n.n(L),$=n(10),K=n(354),X=n.n(K),Z=(n(690),function(){return a.createElement("div",{className:"loading-shading-mui"},a.createElement(X.a,{className:"loading-icon-mui"}))}),ee=n(836),te=n(222),ne="https://igu-online.org/wp-admin/admin-ajax.php",ae=ee.a.Dragger,oe=function(e){return{lookupEditCell:{paddingTop:.875*e.spacing.unit,paddingRight:e.spacing.unit,paddingLeft:e.spacing.unit},dialog:{width:"calc(100% - 16px)"},inputRoot:{width:"100%"}}},le={add:function(e){var t=e.onExecute;return o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement(D.a,{color:"primary",onClick:t,title:"Create new journal"},"New"))},edit:function(e){var t=e.onExecute;return o.a.createElement(M.a,{onClick:t,title:"Edit row"},o.a.createElement(W.a,null))},delete:function(e){var t=e.onExecute;return o.a.createElement(M.a,{onClick:t,title:"Delete row"},o.a.createElement(Q.a,null))},commit:function(e){var t=e.onExecute;return o.a.createElement(M.a,{onClick:t,title:"Save changes"},o.a.createElement(G.a,null))},cancel:function(e){var t=e.onExecute;return o.a.createElement(M.a,{color:"secondary",onClick:t,title:"Cancel changes"},o.a.createElement(Y.a,null))}},ie=function(e){var t=e.id,n=e.onExecute,a=le[t];return o.a.createElement(a,{onExecute:n})},re=(Object($.withStyles)(oe,{name:"ControlledModeDemo"})(function(e){var t=e.availableColumnValues,n=e.value,a=e.onValueChange,l=e.classes;return o.a.createElement(J.a,{className:l.lookupEditCell},o.a.createElement(T.a,{value:n,onChange:function(e){return a(e.target.value)},input:o.a.createElement(U.a,{classes:{root:l.inputRoot}})},t.map(function(e){return o.a.createElement(q.a,{key:e,value:e},e)})))}),function(e){return o.a.createElement(C.d.Cell,e)}),ce=function(e){return o.a.createElement(C.g.Cell,e)},se=function(e){return e.id},ue=function(e){function t(e){var a;Object(r.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){console.log("pano"),console.log(e);var t=e.file.status;"done"===t?a.setState({showUploadModal:!1}):"error"===t&&a.setState({showUploadModal:!1})},a.state={columns:[{name:"id",title:"id",allowEditing:!1},{name:"country",title:"Country"},{name:"name_of_journal",title:"Journal Name"},{name:"print_issn",title:"Print ISSN"},{name:"e_issn",title:"eISSN"},{name:"city_of_publication",title:"City of Publication"},{name:"name_of_publishing_company",title:"Publishing Company"},{name:"editor",title:"Editor"},{name:"editor_email_address",title:"Editor email Addres"},{name:"language",title:"Publication language"},{name:"since",title:"Since"},{name:"isi",title:"ISI"},{name:"isi_category",title:"ISI Category"},{name:"5_year_impact_factor",title:"5 Year Impact Factor"}],tableColumnExtensions:[],rows:[],sorting:[{columnName:"name_of_journal",direction:"asc"}],totalCount:0,pageSize:10,pageSizes:[5,10,15],currentPage:0,loading:!0,editingRowIds:[],addedRows:[],rowChanges:{},deletingRows:[],selection:[],showUploadModal:!1},a.changeSelection=function(e){return a.setState({selection:e})},a.changeSorting=a.changeSorting.bind(Object(f.a)(Object(f.a)(a)));var o=function(){return a.state.deletingRows};return a.changeSorting=function(e){return a.setState({sorting:e})},a.changeEditingRowIds=function(e){return a.setState({editingRowIds:e})},a.changeAddedRows=function(e){return a.setState({addedRows:e.map(function(e){return Object.keys(e).length?e:{country:"",name_of_journal:"",print_issn:"",e_issn:"",city_of_publication:"",name_of_publishing_company:"",editor:"",editor_email_address:"",language:"",since:0,isi:0,isi_category:""}})})},a.changeRowChanges=function(e){return a.setState({rowChanges:e})},a.commitChanges=function(e){var t=e.added,l=e.changed,i=e.deleted,r=a.state.rows;if(t){var c=r.length>0?r[r.length-1].id+1:0;r=[].concat(Object(g.a)(r),Object(g.a)(t.map(function(e,t){return Object(h.a)({id:c+t},e)})));var s=n(155),u={action:"the_ajax_hook",filter:"insert"};Object.keys(t).map(function(e){u.id=e,Object.keys(t[e]).map(function(n){u[n]=t[e][n]})});var d=new Request(ne,{method:"POST",headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded"},body:s.stringify(u)});return fetch(d).then(function(e){return e.json()}).then(function(e){a.setState({rows:e,loading:!1})}).catch(function(e){return e})}if(l){r=r.map(function(e){return l[e.id]?Object(h.a)({},e,l[e.id]):e});var m=n(155),f={action:"the_ajax_hook",filter:"update"};Object.keys(l).map(function(e){f.id=e,Object.keys(l[e]).map(function(t){f[t]=l[e][t]})});var p=new Request(ne,{method:"POST",headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded"},body:m.stringify(f)});return a.setState({loading:!0}),fetch(p).then(function(e){return e.json()}).then(function(e){a.setState({rows:e,loading:!1})}).catch(function(e){return e})}i&&a.setState({rows:r,deletingRows:i||o()})},a.cancelDelete=function(){return a.setState({deletingRows:[]})},a.deleteRows=function(){var e=a.state.rows.slice();o().forEach(function(t){var o=e.findIndex(function(e){return e.id===t});if(o>-1){e.splice(o,1);var l=n(155),i={action:"the_ajax_hook",filter:"delete",payload:t},r=new Request(ne,{method:"POST",headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded"},body:l.stringify(i)});return a.setState({loading:!0}),fetch(r).then(function(e){return e.json()}).then(function(e){a.setState({rows:e,loading:!1})}).catch(function(e){return e})}}),a.setState({rows:e,deletingRows:[]})},a.changeColumnOrder=function(e){a.setState({columnOrder:e})},a.onClickUploadButton=function(){a.setState({showUploadModal:!0})},a.uploadModalHandleOk=function(e){a.setState({visible:!1})},a.uploadModalHandleCancel=function(e){a.setState({showUploadModal:!1})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"changeSorting",value:function(e){this.setState({loading:!0,sorting:e})}},{key:"getData",value:function(){var e=this,t=this.queryString();t!==this.lastQuery?(fetch(t).then(function(e){return e.json()}).then(function(t){return e.setState({rows:t.items,totalCount:t.totalCount,loading:!1})}).catch(function(){return e.setState({loading:!1})}),this.lastQuery=t):this.setState({loading:!1})}},{key:"loadData",value:function(){var e=this,t=n(155),a=new Request(ne,{method:"POST",headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded"},body:t.stringify({action:"the_ajax_hook",filter:"get"})});return fetch(a).then(function(e){return e.json()}).then(function(t){e.setState({rows:t,loading:!1})}).catch(function(){return e.setState({loading:!1})})}},{key:"render",value:function(){var e=this.props.classes,t=this.state,n=t.rows,a=t.columns,l=t.tableColumnExtensions,i=t.loading,r=t.editingRowIds,c=t.addedRows,s=t.rowChanges,u=t.deletingRows,d={name:"file",multiple:!1,action:ne,headers:{Accept:"*/*"},data:{action:"the_ajax_hook",filter:"bulk"},onChange:this.handleChange};return o.a.createElement(w.a,{style:{position:"relative"}},o.a.createElement(D.a,{onClick:this.onClickUploadButton,color:"primary"},"Bulk Upload"),o.a.createElement(C.b,{rows:n,columns:a,getRowId:se},o.a.createElement(C.a,null),o.a.createElement(E.i,null),o.a.createElement(E.c,{editingRowIds:r,onEditingRowIdsChange:this.changeEditingRowIds,rowChanges:s,onRowChangesChange:this.changeRowChanges,addedRows:c,onAddedRowsChange:this.changeAddedRows,onCommitChanges:this.commitChanges}),o.a.createElement(E.f,null),o.a.createElement(C.j,{columnExtensions:l,cellComponent:re,height:800}),o.a.createElement(C.h,null),o.a.createElement(C.e,{defaultOrder:a.map(function(e){return e.name})}),o.a.createElement(C.i,null),o.a.createElement(C.c,null),o.a.createElement(C.g,{cellComponent:ce}),o.a.createElement(C.f,{width:170,showAddCommand:!c.length,showEditCommand:!0,showDeleteCommand:!0,commandComponent:ie}),i&&o.a.createElement(Z,null)),o.a.createElement(S.a,{open:!!u.length,onClose:this.cancelDelete,classes:{paper:e.dialog}},o.a.createElement(x.a,null,"Delete Row"),o.a.createElement(_.a,null,o.a.createElement(R.a,null,"Are you sure you want to delete the following row?"),o.a.createElement(w.a,null,o.a.createElement(C.b,{rows:n.filter(function(e){return u.indexOf(e.id)>-1}),columns:a},o.a.createElement(C.d,{columnExtensions:l,cellComponent:re}),o.a.createElement(C.h,null)))),o.a.createElement(v.a,null,o.a.createElement(D.a,{onClick:this.cancelDelete,color:"primary"},"Cancel"),o.a.createElement(D.a,{onClick:this.deleteRows,color:"secondary"},"Delete"))),o.a.createElement(S.a,{open:this.state.showUploadModal,onClose:this.uploadModalHandleCancel,classes:{paper:e.dialog}},o.a.createElement(x.a,null,"Bulk Upload"),o.a.createElement(_.a,null,o.a.createElement(ae,d,o.a.createElement("p",{className:"ant-upload-drag-icon"},o.a.createElement(te.a,{type:"inbox"})),o.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload")))))}}]),t}(a.Component),de=Object($.withStyles)(oe,{name:"ControlledModeDemo"})(ue),me=m.a.Header,he=m.a.Content,ge=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(m.a,null,o.a.createElement(me,null,o.a.createElement("h1",null,"IGU Journals Editor")),o.a.createElement(he,null,o.a.createElement(de,this.props))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(ge,null),document.getElementById("journals")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[374,2,1]]]);
//# sourceMappingURL=main.4e630bbf.chunk.js.map